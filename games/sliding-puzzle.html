<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Sliding Puzzle - Puzzle Collection</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Poppins:wght@600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="../css/main.css">
  <link rel="stylesheet" href="../css/components.css">
  <link rel="stylesheet" href="../css/games/sliding-puzzle.css">
</head>
<body class="game-page">
  <style>
    /* Emergency CSS to ensure visibility */
    .game-container { 
      display: block !important; 
      visibility: visible !important;
      padding: 20px;
      max-width: 1200px;
      margin: 0 auto;
    }
    .puzzle-board { 
      display: grid !important;
      visibility: visible !important;
      background: #ddd !important;
      border: 2px solid #333 !important;
      border-radius: 8px !important;
      padding: 4px !important;
      width: 400px !important;
      height: 400px !important;
      margin: 20px auto !important;
    }
    .puzzle-tile {
      background: #f0f0f0 !important;
      border: 1px solid #999 !important;
      display: flex !important;
      align-items: center !important;
      justify-content: center !important;
      font-size: 24px !important;
      font-weight: bold !important;
      cursor: pointer !important;
    }
    .puzzle-tile.empty {
      background: transparent !important;
    }
  </style>
  <!-- Navigation Header -->
  <header class="game-header">
    <nav class="game-nav">
      <a href="../index.html" class="nav-back" aria-label="Back to main page">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="m12 19-7-7 7-7"/>
          <path d="m19 12H5"/>
        </svg>
        <span>Back to Games</span>
      </a>
      
      <div class="game-title">
        <h1>Sliding Puzzle</h1>
        <p>Arrange tiles in order by sliding</p>
      </div>
      
      <div class="game-actions">
        <button id="help-btn" class="btn-icon" aria-label="Show help">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="12" cy="12" r="10"/>
            <path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"/>
            <point cx="12" cy="17"/>
          </svg>
        </button>
        
        <button id="settings-btn" class="btn-icon" aria-label="Game settings">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="12" cy="12" r="3"/>
            <path d="M12 1v6m0 6v6"/>
            <path d="M1 12h6m6 0h6"/>
          </svg>
        </button>
      </div>
    </nav>
  </header>

  <!-- Game Interface -->
  <main class="game-container">
    <!-- Game Controls -->
    <section class="game-controls">
      <div class="control-group">
        <label for="board-size">Board Size:</label>
        <select id="board-size" class="select-input">
          <option value="3">3√ó3 (8-Puzzle)</option>
          <option value="4" selected>4√ó4 (15-Puzzle)</option>
          <option value="5">5√ó5 (24-Puzzle)</option>
        </select>
      </div>
      
      <div class="control-group">
        <label for="puzzle-mode">Puzzle Mode:</label>
        <select id="puzzle-mode" class="select-input">
          <option value="numbers" selected>Numbers</option>
          <option value="image">Custom Image</option>
        </select>
      </div>
      
      <div class="control-group">
        <button id="new-game-btn" class="btn btn-primary">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <polyline points="1 4 1 10 7 10"/>
            <path d="M3.51 15a9 9 0 1 0 2.13-9.36L1 10"/>
          </svg>
          New Game
        </button>
        
        <button id="shuffle-btn" class="btn btn-secondary">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <polyline points="16 3 21 3 21 8"/>
            <line x1="4" y1="20" x2="21" y2="3"/>
            <polyline points="21 16 21 21 16 21"/>
            <line x1="15" y1="15" x2="21" y2="21"/>
            <line x1="4" y1="4" x2="9" y2="9"/>
          </svg>
          Shuffle
        </button>
      </div>
    </section>

    <!-- Game Stats -->
    <section class="game-stats">
      <div class="stat-item">
        <span class="stat-label">Moves:</span>
        <span class="stat-value" id="move-count">0</span>
      </div>
      
      <div class="stat-item">
        <span class="stat-label">Time:</span>
        <span class="stat-value" id="game-time">00:00</span>
      </div>
      
      <div class="stat-item">
        <span class="stat-label">Best:</span>
        <span class="stat-value" id="best-moves">‚Äî</span>
      </div>
    </section>

    <!-- Image Upload Area -->
    <section class="image-upload" id="image-upload-area" style="display: none;">
      <div class="upload-zone" id="upload-zone">
        <div class="upload-content">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <rect x="3" y="3" width="18" height="18" rx="2" ry="2"/>
            <circle cx="8.5" cy="8.5" r="1.5"/>
            <polyline points="21,15 16,10 5,21"/>
          </svg>
          <p>Drop an image here or <button type="button" id="browse-btn" class="link-btn">browse files</button></p>
          <input type="file" id="image-input" accept="image/*" hidden>
          <small>Supports JPG, PNG, GIF ‚Ä¢ Max 5MB</small>
        </div>
      </div>
      
      <div class="image-preview" id="image-preview" style="display: none;">
        <img id="preview-img" alt="Puzzle preview">
        <button id="remove-image-btn" class="btn-icon btn-danger" aria-label="Remove image">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <line x1="18" y1="6" x2="6" y2="18"/>
            <line x1="6" y1="6" x2="18" y2="18"/>
          </svg>
        </button>
      </div>
    </section>

    <!-- Game Board -->
    <section class="game-board-container">
      <div class="puzzle-board" id="puzzle-board">
        <!-- Tiles will be generated dynamically -->
      </div>
      
      <div class="board-overlay" id="board-overlay">
        <div class="overlay-content">
          <div class="success-animation" id="success-animation" style="display: none;">
            <div class="success-icon">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3">
                <path d="M20 6L9 17L4 12"/>
              </svg>
            </div>
            <h3>Puzzle Solved!</h3>
            <p id="completion-stats">Great job!</p>
          </div>
        </div>
      </div>
    </section>

    <!-- Action Buttons -->
    <section class="game-actions-bottom">
      <button id="hint-btn" class="btn btn-outline" disabled>
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <circle cx="12" cy="12" r="10"/>
          <path d="M8 12h8"/>
          <path d="M12 8v8"/>
        </svg>
        Hint
      </button>
      
      <button id="solve-btn" class="btn btn-outline">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"/>
        </svg>
        Auto Solve
      </button>
      
      <button id="reset-btn" class="btn btn-outline">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <polyline points="1 4 1 10 7 10"/>
          <path d="M3.51 15a9 9 0 1 0 2.13-9.36L1 10"/>
        </svg>
        Reset
      </button>
    </section>
  </main>

  <!-- Modals -->
  <!-- Help Modal -->
  <div class="modal-overlay" id="help-modal">
    <div class="modal-content">
      <div class="modal-header">
        <h2>How to Play Sliding Puzzle</h2>
        <button class="modal-close" aria-label="Close modal">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <line x1="18" y1="6" x2="6" y2="18"/>
            <line x1="6" y1="6" x2="18" y2="18"/>
          </svg>
        </button>
      </div>
      
      <div class="modal-body">
        <div class="help-section">
          <h3>üéØ Objective</h3>
          <p>Arrange the numbered tiles in order from 1 to N (or complete the image) by sliding tiles into the empty space.</p>
        </div>
        
        <div class="help-section">
          <h3>üéÆ How to Play</h3>
          <ul>
            <li><strong>Click or Tap:</strong> Click a tile next to the empty space to slide it</li>
            <li><strong>Keyboard:</strong> Use arrow keys to move tiles (‚Üë‚Üì‚Üê‚Üí)</li>
            <li><strong>Touch:</strong> Swipe tiles toward the empty space on mobile</li>
          </ul>
        </div>
        
        <div class="help-section">
          <h3>üèÜ Difficulty Levels</h3>
          <ul>
            <li><strong>3√ó3 (8-Puzzle):</strong> Perfect for beginners</li>
            <li><strong>4√ó4 (15-Puzzle):</strong> Classic challenging experience</li>
            <li><strong>5√ó5 (24-Puzzle):</strong> Expert level difficulty</li>
          </ul>
        </div>
        
        <div class="help-section">
          <h3>üé® Custom Images</h3>
          <p>Switch to "Custom Image" mode and upload your own photos to create personalized puzzles. Images are automatically cropped and resized to fit the grid.</p>
        </div>
        
        <div class="help-section">
          <h3>üí° Tips & Strategy</h3>
          <ul>
            <li>Start by positioning the top row correctly</li>
            <li>Work systematically from top to bottom</li>
            <li>Use the hint system when stuck</li>
            <li>Practice with smaller grids first</li>
          </ul>
        </div>
      </div>
      
      <div class="modal-footer">
        <button class="btn btn-primary modal-close">Got It!</button>
      </div>
    </div>
  </div>

  <!-- Settings Modal -->
  <div class="modal-overlay" id="settings-modal">
    <div class="modal-content">
      <div class="modal-header">
        <h2>Game Settings</h2>
        <button class="modal-close" aria-label="Close modal">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <line x1="18" y1="6" x2="6" y2="18"/>
            <line x1="6" y1="6" x2="18" y2="18"/>
          </svg>
        </button>
      </div>
      
      <div class="modal-body">
        <div class="setting-group">
          <label class="setting-label">
            <span>Animation Speed</span>
            <select id="animation-speed" class="select-input">
              <option value="fast">Fast</option>
              <option value="normal" selected>Normal</option>
              <option value="slow">Slow</option>
              <option value="none">None</option>
            </select>
          </label>
        </div>
        
        <div class="setting-group">
          <label class="setting-label">
            <span>Sound Effects</span>
            <input type="checkbox" id="sound-effects" class="checkbox-input" checked>
          </label>
        </div>
        
        <div class="setting-group">
          <label class="setting-label">
            <span>Show Move Numbers</span>
            <input type="checkbox" id="show-numbers" class="checkbox-input" checked>
          </label>
        </div>
        
        <div class="setting-group">
          <label class="setting-label">
            <span>Highlight Valid Moves</span>
            <input type="checkbox" id="highlight-valid" class="checkbox-input" checked>
          </label>
        </div>
      </div>
      
      <div class="modal-footer">
        <button class="btn btn-secondary modal-close">Cancel</button>
        <button class="btn btn-primary" id="save-settings">Save Settings</button>
      </div>
    </div>
  </div>

  <!-- JavaScript -->
  <script src="../js/utils.js"></script>
  <script src="../js/games/sliding-puzzle.js"></script>
</body>
</html>